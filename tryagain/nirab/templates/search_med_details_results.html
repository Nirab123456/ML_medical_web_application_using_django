{% load about_me %}
{% include 'base.html' %}
{% block content %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">

<head>


    <link href="{% about_me 'css/full_search.css' %}" rel="stylesheet" media="all">
    <link href="{% about_me 'css/material-design-iconic-font.css' %}" rel="stylesheet" media="all">
    <link href="{% about_me 'css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">
    <link rel="stylesheet" href="{% about_me 'css/search.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<style>

.my_coll-2 {
    width: -webkit-calc(100% - 20px);
    width: -moz-calc(100% - 20px);
    width: calc(100% - 20px);
  }
  
  @media (max-width: 1700px) {
  .my_coll-2 {
      width: 100%;
    }
  }



</style>



</head>


<body>
    <div class="page-wrapper " style="background: url(&quot;{% about_me 'img/bg-img-01.jpg' %}&quot;) center / cover no-repeat;">
        <div style="margin-left: 15px">


                    <div class="tab-content">

                        <div id="tab1">




                                <div class="row row-space">

                                  
                                    <div  class="col-2" >

                                        <div id="get_medicine_details"></div>

                                      
                                    </div>


                                    
                                    <div class="col-2">




                                      
                                    </div>

                                </div>







                                
                                


                        </div>

















                    </div>
                </div>
            </div>


            
</body>

<!-- <script src="{% about_me 'js/search_results.js' %}"></script> -->
<script>
  

  // Retrieve the query parameters from the URL
  const urlParams = new URLSearchParams(window.location.search);
  const drugName = urlParams.get('name');
  
  // Now you have the values of the query parameters in the variables (strength, dosageForm, drugName).
  // You can use these values as needed in the JavaScript code of this HTML page.
  // console.log('Strength:', strength);
  // console.log('Dosage Form:', dosageForm);
  // console.log('Drug Name:', drugName);




                  // Make an AJAX call to fetch the medication details based on the selected strength, dosage form, and drug name
                  var xhr = new XMLHttpRequest();
                  xhr.open('GET', '/get_medicine_details/?name=' + drugName , true);
                  xhr.onload = function() {
                    if (xhr.status === 200) {
                      var get_medicine_details = JSON.parse(xhr.responseText);
                      if (Array.isArray(get_medicine_details) && get_medicine_details.length > 0) {
  
                        // Display details for each medication
                        var detailsHtml = "";
                        for (var i = 0; i < get_medicine_details.length; i++) {
                          var medication = get_medicine_details[i];
                          detailsHtml += 
                          
                          `
                          <div class='medication-details'>
                          <p><strong>Generic Name:</strong>  ${medication.generic_name}  </p>
                          <p><strong>DRUG CLASS:</strong>  ${medication.drug_class}  </p>
                          <p><strong>Indication:</strong>   ${medication.indication}  </p>
                          <p><strong>INDICATION DESCRIPTION:</strong>   ${medication.indication_description}  </p>
                          <p><strong>THERAPEUTIC CLASS:</strong>   ${medication.therapeutic_class_description}  </p>
                          <p><strong>PHARMACOLOGY DESCRIPTION:</strong>  ${medication.pharmacology_description}  </p>
                          <p><strong>DOSAGE DESCRIPTION:</strong>   ${medication.dosage_description}  </p>
                          <p><strong> INTERACTIONS DESCRIPTION:</strong>   ${medication.interaction_description}  </p>
                          <p><strong>CONTRAINDICATIONS DESCRIPTION:</strong>   ${medication.contraindications_description}  </p>
                          <p><strong> SIDE EFFECTS DESCRIPTION:</strong>   ${medication.side_effects_description}  </p>
                          </div>
                          <hr>
                          `;
                        }
                        document.getElementById("get_medicine_details").innerHTML = detailsHtml;
                      } else {
                        // Display "No data found" message
                        document.getElementById("get_medicine_details").innerHTML = "<p>No data found</p>";
                      }
                    } else {
                      console.error('Request failed. Status:', xhr.status);
                      // Display "No data found" message for error cases
                      document.getElementById("get_medicine_details").innerHTML = "<p>No data found</p>";
                    }
                  };
                  xhr.onerror = function() {
                    console.error('Request failed. Network error');
                    // Display "No data found" message for network errors
                    document.getElementById("get_medicine_details").innerHTML = "<p>No data found</p>";
                  };
                  xhr.send();


</script>
</html>
{% endblock %}
